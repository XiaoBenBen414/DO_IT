<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DO_IT</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#6366F1',
                        accent: '#EC4899',
                        dark: '#1E293B',
                        light: '#F8FAFC'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .counter-shadow {
                box-shadow: 0 10px 25px -5px rgba(59, 130, 246, 0.2);
            }
            .btn-hover {
                @apply transition-all duration-300 hover:shadow-lg hover:-translate-y-1;
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen flex flex-col items-center justify-center p-4">
    <div class="max-w-md w-full bg-white rounded-2xl shadow-xl p-8 counter-shadow transform transition-all duration-500 hover:shadow-2xl">
        <h1 class="text-[clamp(1.8rem,5vw,2.5rem)] font-bold text-dark mb-6 text-center">
            <i class="fa fa-calculator text-primary mr-2"></i>DO_IT
        </h1>
        
        <div class="space-y-6">
            <div class="bg-blue-50 p-6 rounded-xl border border-blue-100">
                <label for="targetNumber" class="block text-sm font-medium text-gray-700 mb-2">
                    请输入一个大于0的整数:
                </label>
                <div class="flex items-center space-x-2">
                    <input type="number" id="targetNumber" min="1" placeholder="例如: 100" 
                           class="flex-1 px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all">
                    <button id="controlBtn" class="bg-primary hover:bg-primary/90 text-white px-6 py-3 rounded-lg font-medium flex items-center btn-hover">
                        <i class="fa fa-play mr-2"></i>
                        <span>开始</span>
                    </button>
                </div>
            </div>
            
            <div class="bg-gray-50 p-6 rounded-xl border border-gray-100">
                <h2 class="text-lg font-semibold text-gray-800 mb-3">当前状态:</h2>
                <div id="status" class="text-gray-600 mb-3">准备就绪</div>
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm text-gray-500">目标数字:</p>
                        <p id="targetDisplay" class="text-2xl font-bold text-gray-800">--</p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-500">当前数字:</p>
                        <p id="currentDisplay" class="text-4xl font-bold text-primary">0</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="mt-8 text-center text-sm text-gray-500">
            <p>点击开始按钮后，数字将从1开始循环递增至您设置的目标值</p>
        </div>
    </div>
    
    <script>
        // DOM元素
        const targetInput = document.getElementById('targetNumber');
        const controlBtn = document.getElementById('controlBtn');
        const statusDisplay = document.getElementById('status');
        const targetDisplay = document.getElementById('targetDisplay');
        const currentDisplay = document.getElementById('currentDisplay');
        
        // 状态变量
        let isCounting = false;
        let counter = 0;
        let target = 0;
        let intervalId = null;
        let isLooping = true; // 新增：循环播放标志
        
        // 控制按钮点击事件
        controlBtn.addEventListener('click', function() {
            if (isCounting) {
                stopCounting();
            } else {
                startCounting();
            }
        });
        
        // 开始计数
        function startCounting() {
            // 获取并验证目标数字
            target = parseInt(targetInput.value, 10);
            if (isNaN(target) || target <= 0) {
                showNotification('请输入一个大于0的整数', 'error');
                return;
            }
            
            // 更新UI
            isCounting = true;
            counter = 0; // 重置为0，这样第一次计数会显示1
            targetDisplay.textContent = target;
            statusDisplay.textContent = '正在循环计数...';
            controlBtn.innerHTML = '<i class="fa fa-pause mr-2"></i><span>停止</span>';
            controlBtn.classList.remove('bg-primary');
            controlBtn.classList.add('bg-accent');
            
            // 平滑计数动画 - 调整为100ms的更新间隔，更加适中
            intervalId = setInterval(() => {
                if (counter < target) {
                    counter++;
                } else {
                    // 当达到目标值时重置为0，这样下一轮会从1开始
                    counter = 0;
                    showNotification('已重置，开始新一轮计数', 'info');
                }
                updateDisplay();
            }, 15);
        }
        
        // 停止计数
        function stopCounting() {
            clearInterval(intervalId);
            isCounting = false;
            statusDisplay.textContent = '已停止';
            controlBtn.innerHTML = '<i class="fa fa-play mr-2"></i><span>开始</span>';
            controlBtn.classList.remove('bg-accent');
            controlBtn.classList.add('bg-primary');
        }
        
        // 更新显示
        function updateDisplay() {
            // 添加数字变化动画
            currentDisplay.classList.add('scale-110');
            setTimeout(() => {
                currentDisplay.classList.remove('scale-110');
            }, 80);
            
            currentDisplay.textContent = counter;
        }
        
        // 显示通知
        function showNotification(message, type = 'info') {
            // 创建通知元素
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg z-50 transform transition-all duration-500 ${
                type === 'success' ? 'bg-green-50 text-green-800 border border-green-200' : 
                type === 'error' ? 'bg-red-50 text-red-800 border border-red-200' : 
                'bg-blue-50 text-blue-800 border border-blue-200'
            }`;
            notification.innerHTML = `
                <div class="flex items-center">
                    <i class="fa ${
                        type === 'success' ? 'fa-check-circle' : 
                        type === 'error' ? 'fa-exclamation-circle' : 
                        'fa-info-circle'
                    } mr-2"></i>
                    <span>${message}</span>
                </div>
            `;
            
            // 添加到页面
            document.body.appendChild(notification);
            
            // 动画效果
            setTimeout(() => {
                notification.classList.add('opacity-0');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 500);
            }, 3000);
        }
        
        // 添加输入验证
        targetInput.addEventListener('input', function() {
            this.value = this.value.replace(/[^0-9]/g, '');
        });
    </script>
</body>
</html>